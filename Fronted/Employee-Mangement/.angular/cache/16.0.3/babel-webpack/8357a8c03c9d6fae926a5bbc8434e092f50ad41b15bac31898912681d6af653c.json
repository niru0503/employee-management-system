{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Employee } from '../employee';\nlet CreateEmployeeComponent = class CreateEmployeeComponent {\n  constructor(employeeService, router) {\n    this.employeeService = employeeService;\n    this.router = router;\n    this.employee = new Employee();\n    this.emailExists = false;\n    this.checkingEmail = false;\n    this.allEmployees = [];\n  }\n  ngOnInit() {\n    // Load all employees to check for duplicate emails\n    this.loadAllEmployees();\n  }\n  // Load all employees from the backend\n  loadAllEmployees() {\n    this.employeeService.getEmployeesList().subscribe({\n      next: data => {\n        this.allEmployees = data;\n      },\n      error: error => {\n        console.error('Error loading employees:', error);\n      }\n    });\n  }\n  // Check if email already exists\n  checkEmailExists(email) {\n    if (!email || !email.trim()) {\n      this.emailExists = false;\n      this.checkingEmail = false;\n      return;\n    }\n    this.checkingEmail = true;\n    // Simulate a small delay for better UX\n    setTimeout(() => {\n      const emailExists = this.allEmployees.some(emp => emp.emailId && emp.emailId.toLowerCase() === email.toLowerCase());\n      this.emailExists = emailExists;\n      this.checkingEmail = false;\n    }, 300);\n  }\n  // It send the employee data to employee service method(which is createEmployee)\n  saveEmployee() {\n    if (this.emailExists) {\n      return; // Don't attempt to save if email exists\n    }\n\n    this.employeeService.createEmployee(this.employee).subscribe({\n      next: data => {\n        console.log(data);\n        // Reload employees list\n        this.loadAllEmployees();\n        // Navigate to employee list\n        this.goToEmployeeList();\n      },\n      error: error => {\n        console.error('Create failed', error);\n      }\n    });\n  }\n  // It will transfer to the /employees path\n  goToEmployeeList() {\n    this.router.navigate(['/employees']);\n  }\n  onSubmit(form) {\n    if (form && form.invalid) {\n      // mark controls as touched to show validation\n      Object.values(form.controls).forEach(c => c.markAsTouched());\n      return;\n    }\n    if (this.emailExists) {\n      return; // Don't submit if email already exists\n    }\n\n    this.saveEmployee();\n  }\n};\nCreateEmployeeComponent = __decorate([Component({\n  selector: 'app-create-employee',\n  templateUrl: './create-employee.component.html',\n  styleUrls: ['./create-employee.component.css']\n})], CreateEmployeeComponent);\nexport { CreateEmployeeComponent };","map":{"version":3,"names":["Component","Employee","CreateEmployeeComponent","constructor","employeeService","router","employee","emailExists","checkingEmail","allEmployees","ngOnInit","loadAllEmployees","getEmployeesList","subscribe","next","data","error","console","checkEmailExists","email","trim","setTimeout","some","emp","emailId","toLowerCase","saveEmployee","createEmployee","log","goToEmployeeList","navigate","onSubmit","form","invalid","Object","values","controls","forEach","c","markAsTouched","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\nikki\\Fronted\\Employee-Mangement\\src\\app\\create-employee\\create-employee.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { Employee } from '../employee';\nimport { EmployeeService } from '../employee.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-create-employee',\n  templateUrl: './create-employee.component.html',\n  styleUrls: ['./create-employee.component.css']\n})\n\nexport class CreateEmployeeComponent implements OnInit{\n\n  employee: Employee = new Employee()\n  emailExists: boolean = false;\n  checkingEmail: boolean = false;\n  allEmployees: Employee[] = [];\n\n  constructor(private employeeService: EmployeeService, \n  private router: Router){ }\n\n  ngOnInit(): void {\n    // Load all employees to check for duplicate emails\n    this.loadAllEmployees();\n  }\n\n  // Load all employees from the backend\n  loadAllEmployees() {\n    this.employeeService.getEmployeesList().subscribe({\n      next: (data) => {\n        this.allEmployees = data;\n      },\n      error: (error) => {\n        console.error('Error loading employees:', error);\n      }\n    });\n  }\n\n  // Check if email already exists\n  checkEmailExists(email: string) {\n    if (!email || !email.trim()) {\n      this.emailExists = false;\n      this.checkingEmail = false;\n      return;\n    }\n\n    this.checkingEmail = true;\n    \n    // Simulate a small delay for better UX\n    setTimeout(() => {\n      const emailExists = this.allEmployees.some(emp => \n        emp.emailId && emp.emailId.toLowerCase() === email.toLowerCase()\n      );\n      this.emailExists = emailExists;\n      this.checkingEmail = false;\n    }, 300);\n  }\n\n  // It send the employee data to employee service method(which is createEmployee)\n  saveEmployee(){\n    if (this.emailExists) {\n      return; // Don't attempt to save if email exists\n    }\n\n    this.employeeService.createEmployee(this.employee).subscribe({\n      next: (data) => {\n        console.log(data);\n        // Reload employees list\n        this.loadAllEmployees();\n        // Navigate to employee list\n        this.goToEmployeeList();\n      },\n      error: (error) => {\n        console.error('Create failed', error);\n      }\n    });\n  }\n\n  // It will transfer to the /employees path\n  goToEmployeeList(){\n    this.router.navigate(['/employees']);\n  }\n\n  onSubmit(form?: NgForm){\n    if(form && form.invalid){\n      // mark controls as touched to show validation\n      Object.values(form.controls).forEach(c => c.markAsTouched());\n      return;\n    }\n    \n    if(this.emailExists) {\n      return; // Don't submit if email already exists\n    }\n\n    this.saveEmployee();\n  }\n    \n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAEjD,SAASC,QAAQ,QAAQ,aAAa;AAUtC,IAAaC,uBAAuB,GAApC,MAAaA,uBAAuB;EAOlCC,YAAoBC,eAAgC,EAC5CC,MAAc;IADF,KAAAD,eAAe,GAAfA,eAAe;IAC3B,KAAAC,MAAM,GAANA,MAAM;IANd,KAAAC,QAAQ,GAAa,IAAIL,QAAQ,EAAE;IACnC,KAAAM,WAAW,GAAY,KAAK;IAC5B,KAAAC,aAAa,GAAY,KAAK;IAC9B,KAAAC,YAAY,GAAe,EAAE;EAGJ;EAEzBC,QAAQA,CAAA;IACN;IACA,IAAI,CAACC,gBAAgB,EAAE;EACzB;EAEA;EACAA,gBAAgBA,CAAA;IACd,IAAI,CAACP,eAAe,CAACQ,gBAAgB,EAAE,CAACC,SAAS,CAAC;MAChDC,IAAI,EAAGC,IAAI,IAAI;QACb,IAAI,CAACN,YAAY,GAAGM,IAAI;MAC1B,CAAC;MACDC,KAAK,EAAGA,KAAK,IAAI;QACfC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAClD;KACD,CAAC;EACJ;EAEA;EACAE,gBAAgBA,CAACC,KAAa;IAC5B,IAAI,CAACA,KAAK,IAAI,CAACA,KAAK,CAACC,IAAI,EAAE,EAAE;MAC3B,IAAI,CAACb,WAAW,GAAG,KAAK;MACxB,IAAI,CAACC,aAAa,GAAG,KAAK;MAC1B;;IAGF,IAAI,CAACA,aAAa,GAAG,IAAI;IAEzB;IACAa,UAAU,CAAC,MAAK;MACd,MAAMd,WAAW,GAAG,IAAI,CAACE,YAAY,CAACa,IAAI,CAACC,GAAG,IAC5CA,GAAG,CAACC,OAAO,IAAID,GAAG,CAACC,OAAO,CAACC,WAAW,EAAE,KAAKN,KAAK,CAACM,WAAW,EAAE,CACjE;MACD,IAAI,CAAClB,WAAW,GAAGA,WAAW;MAC9B,IAAI,CAACC,aAAa,GAAG,KAAK;IAC5B,CAAC,EAAE,GAAG,CAAC;EACT;EAEA;EACAkB,YAAYA,CAAA;IACV,IAAI,IAAI,CAACnB,WAAW,EAAE;MACpB,OAAO,CAAC;;;IAGV,IAAI,CAACH,eAAe,CAACuB,cAAc,CAAC,IAAI,CAACrB,QAAQ,CAAC,CAACO,SAAS,CAAC;MAC3DC,IAAI,EAAGC,IAAI,IAAI;QACbE,OAAO,CAACW,GAAG,CAACb,IAAI,CAAC;QACjB;QACA,IAAI,CAACJ,gBAAgB,EAAE;QACvB;QACA,IAAI,CAACkB,gBAAgB,EAAE;MACzB,CAAC;MACDb,KAAK,EAAGA,KAAK,IAAI;QACfC,OAAO,CAACD,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;MACvC;KACD,CAAC;EACJ;EAEA;EACAa,gBAAgBA,CAAA;IACd,IAAI,CAACxB,MAAM,CAACyB,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC;EACtC;EAEAC,QAAQA,CAACC,IAAa;IACpB,IAAGA,IAAI,IAAIA,IAAI,CAACC,OAAO,EAAC;MACtB;MACAC,MAAM,CAACC,MAAM,CAACH,IAAI,CAACI,QAAQ,CAAC,CAACC,OAAO,CAACC,CAAC,IAAIA,CAAC,CAACC,aAAa,EAAE,CAAC;MAC5D;;IAGF,IAAG,IAAI,CAAChC,WAAW,EAAE;MACnB,OAAO,CAAC;;;IAGV,IAAI,CAACmB,YAAY,EAAE;EACrB;CAED;AAtFYxB,uBAAuB,GAAAsC,UAAA,EANnCxC,SAAS,CAAC;EACTyC,QAAQ,EAAE,qBAAqB;EAC/BC,WAAW,EAAE,kCAAkC;EAC/CC,SAAS,EAAE,CAAC,iCAAiC;CAC9C,CAAC,C,EAEWzC,uBAAuB,CAsFnC;SAtFYA,uBAAuB"},"metadata":{},"sourceType":"module","externalDependencies":[]}