{"ast":null,"code":"import { map, catchError } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nclass AuthService {\n  constructor(httpClient, router) {\n    this.httpClient = httpClient;\n    this.router = router;\n    this.tokenKey = 'ems_auth_token';\n    this.userKey = 'ems_auth_user';\n    this.baseURL = 'http://localhost:8080/auth';\n  }\n  login(username, password) {\n    const payload = {\n      username,\n      password\n    };\n    return this.httpClient.post(`${this.baseURL}/login`, payload).pipe(map(response => {\n      if (response.success && response.data) {\n        localStorage.setItem(this.tokenKey, response.data.token);\n        localStorage.setItem(this.userKey, response.data.username);\n      }\n      return response.data;\n    }), catchError(error => {\n      console.error('Login failed:', error);\n      throw error;\n    }));\n  }\n  logout() {\n    localStorage.removeItem(this.tokenKey);\n    localStorage.removeItem(this.userKey);\n    this.router.navigate(['/login']);\n  }\n  isAuthenticated() {\n    return !!localStorage.getItem(this.tokenKey);\n  }\n  currentUser() {\n    return localStorage.getItem(this.userKey);\n  }\n}\nAuthService.ɵfac = function AuthService_Factory(t) {\n  return new (t || AuthService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.Router));\n};\nAuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthService,\n  factory: AuthService.ɵfac,\n  providedIn: 'root'\n});\nexport { AuthService };","map":{"version":3,"names":["map","catchError","AuthService","constructor","httpClient","router","tokenKey","userKey","baseURL","login","username","password","payload","post","pipe","response","success","data","localStorage","setItem","token","error","console","logout","removeItem","navigate","isAuthenticated","getItem","currentUser","i0","ɵɵinject","i1","HttpClient","i2","Router","factory","ɵfac","providedIn"],"sources":["C:\\Users\\NIRANCHANA\\OneDrive\\Desktop\\WIPRO PROJECT\\Employee-Management-System-using-Spring-Boot-and-Angular-main\\Fronted\\Employee-Mangement\\src\\app\\auth.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Router } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport { map, catchError } from 'rxjs/operators';\r\n\r\nexport interface LoginRequest {\r\n  username: string;\r\n  password: string;\r\n}\r\n\r\nexport interface ApiResponse<T> {\r\n  success: boolean;\r\n  message: string;\r\n  data: T;\r\n  timestamp: string;\r\n}\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AuthService {\r\n  private tokenKey = 'ems_auth_token';\r\n  private userKey = 'ems_auth_user';\r\n\r\n  private baseURL = 'http://localhost:8080/auth';\r\n\r\n  constructor(private httpClient: HttpClient, private router: Router) {}\r\n\r\n  login(username: string, password: string): Observable<any> {\r\n    const payload = { username, password };\r\n    return this.httpClient\r\n      .post<ApiResponse<any>>(`${this.baseURL}/login`, payload)\r\n      .pipe(\r\n        map((response) => {\r\n          if (response.success && response.data) {\r\n            localStorage.setItem(this.tokenKey, response.data.token);\r\n            localStorage.setItem(this.userKey, response.data.username);\r\n          }\r\n          return response.data;\r\n        }),\r\n        catchError((error) => {\r\n          console.error('Login failed:', error);\r\n          throw error;\r\n        })\r\n      );\r\n  }\r\n\r\n  logout(){\r\n    localStorage.removeItem(this.tokenKey);\r\n    localStorage.removeItem(this.userKey);\r\n    this.router.navigate(['/login']);\r\n  }\r\n\r\n  isAuthenticated(): boolean{\r\n    return !!localStorage.getItem(this.tokenKey);\r\n  }\r\n\r\n  currentUser(): string | null{\r\n    return localStorage.getItem(this.userKey);\r\n  }\r\n}\r\n"],"mappings":"AAIA,SAASA,GAAG,EAAEC,UAAU,QAAQ,gBAAgB;;;;AAchD,MACaC,WAAW;EAMtBC,YAAoBC,UAAsB,EAAUC,MAAc;IAA9C,KAAAD,UAAU,GAAVA,UAAU;IAAsB,KAAAC,MAAM,GAANA,MAAM;IALlD,KAAAC,QAAQ,GAAG,gBAAgB;IAC3B,KAAAC,OAAO,GAAG,eAAe;IAEzB,KAAAC,OAAO,GAAG,4BAA4B;EAEuB;EAErEC,KAAKA,CAACC,QAAgB,EAAEC,QAAgB;IACtC,MAAMC,OAAO,GAAG;MAAEF,QAAQ;MAAEC;IAAQ,CAAE;IACtC,OAAO,IAAI,CAACP,UAAU,CACnBS,IAAI,CAAmB,GAAG,IAAI,CAACL,OAAO,QAAQ,EAAEI,OAAO,CAAC,CACxDE,IAAI,CACHd,GAAG,CAAEe,QAAQ,IAAI;MACf,IAAIA,QAAQ,CAACC,OAAO,IAAID,QAAQ,CAACE,IAAI,EAAE;QACrCC,YAAY,CAACC,OAAO,CAAC,IAAI,CAACb,QAAQ,EAAES,QAAQ,CAACE,IAAI,CAACG,KAAK,CAAC;QACxDF,YAAY,CAACC,OAAO,CAAC,IAAI,CAACZ,OAAO,EAAEQ,QAAQ,CAACE,IAAI,CAACP,QAAQ,CAAC;;MAE5D,OAAOK,QAAQ,CAACE,IAAI;IACtB,CAAC,CAAC,EACFhB,UAAU,CAAEoB,KAAK,IAAI;MACnBC,OAAO,CAACD,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;MACrC,MAAMA,KAAK;IACb,CAAC,CAAC,CACH;EACL;EAEAE,MAAMA,CAAA;IACJL,YAAY,CAACM,UAAU,CAAC,IAAI,CAAClB,QAAQ,CAAC;IACtCY,YAAY,CAACM,UAAU,CAAC,IAAI,CAACjB,OAAO,CAAC;IACrC,IAAI,CAACF,MAAM,CAACoB,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;EAClC;EAEAC,eAAeA,CAAA;IACb,OAAO,CAAC,CAACR,YAAY,CAACS,OAAO,CAAC,IAAI,CAACrB,QAAQ,CAAC;EAC9C;EAEAsB,WAAWA,CAAA;IACT,OAAOV,YAAY,CAACS,OAAO,CAAC,IAAI,CAACpB,OAAO,CAAC;EAC3C;;AAvCWL,WAAW,C;mBAAXA,WAAW,EAAA2B,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,MAAA;AAAA;AAAXhC,WAAW,C;SAAXA,WAAW;EAAAiC,OAAA,EAAXjC,WAAW,CAAAkC,IAAA;EAAAC,UAAA,EADE;AAAM;SACnBnC,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}